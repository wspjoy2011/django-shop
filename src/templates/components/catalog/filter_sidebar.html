<!-- Filter Overlay -->
<div class="filter-overlay" id="filterOverlay"></div>

<!-- Filter Sidebar -->
<div class="filter-sidebar" id="filterSidebar" aria-hidden="true">
  <div class="filter-header d-flex align-items-center justify-content-between">
    <h5 class="mb-0">
      <i class="fas fa-filter me-2"></i>Filters
    </h5>
    <button type="button" class="btn btn-sm btn-outline-secondary" id="closeSidebar" aria-label="Close">
      <i class="fas fa-times"></i>
    </button>
  </div>

  <div class="filter-content">

    <!-- Gender section -->
    <div class="filter-section">
      <button class="filter-section-toggle w-100 d-flex align-items-center justify-content-between"
              id="genderToggleBtn" type="button" aria-expanded="false" aria-controls="genderSection">
        <span class="fw-bold">Gender</span>
        <i class="fas fa-chevron-down small ms-2 toggle-icon"></i>
      </button>

      <div class="filter-section-body mt-2" id="genderSection">
        <div class="form-check">
          <input class="form-check-input" type="checkbox" id="gender_all">
          <label class="form-check-label" for="gender_all">All</label>
        </div>
        {% for gender_name in gender_options %}
          <div class="form-check">
            <input class="form-check-input gender-checkbox" type="checkbox"
                   id="gender_{{ gender_name|slugify }}" value="{{ gender_name }}"
                   {% if gender_name in selected_genders %}checked{% endif %}>
            <label class="form-check-label" for="gender_{{ gender_name|slugify }}">{{ gender_name }}</label>
          </div>
        {% endfor %}
      </div>
    </div>

    <!-- Season section -->
    <div class="filter-section mt-3">
      <button class="filter-section-toggle w-100 d-flex align-items-center justify-content-between"
              id="seasonToggleBtn" type="button" aria-expanded="false" aria-controls="seasonSection">
        <span class="fw-bold">Season</span>
        <i class="fas fa-chevron-down small ms-2 toggle-icon"></i>
      </button>

      <div class="filter-section-body mt-2" id="seasonSection">
        <div class="form-check">
          <input class="form-check-input" type="checkbox" id="season_all">
          <label class="form-check-label" for="season_all">All</label>
        </div>
        {% for season_name, season_slug in season_options %}
          <div class="form-check">
            <input class="form-check-input season-checkbox" type="checkbox"
                   id="season_{{ season_slug }}" value="{{ season_slug }}"
                   {% if season_slug in selected_seasons %}checked{% endif %}>
            <label class="form-check-label" for="season_{{ season_slug }}">{{ season_name }}</label>
          </div>
        {% endfor %}
      </div>
    </div>

    <!-- Availability section -->
    <div class="filter-section mt-3">
      <button class="filter-section-toggle w-100 d-flex align-items-center justify-content-between"
              id="availabilityToggleBtn" type="button" aria-expanded="false" aria-controls="availabilitySection">
        <span class="fw-bold">Availability</span>
        <i class="fas fa-chevron-down small ms-2 toggle-icon"></i>
      </button>

      <div class="filter-section-body mt-2" id="availabilitySection">
        <div class="form-check availability-all">
          <input class="form-check-input" type="checkbox" id="availability_all">
          <label class="form-check-label" for="availability_all">
            <i class="fas fa-list me-2"></i>All
          </label>
        </div>
        {% for availability_value, availability_name in availability_options %}
          <div class="form-check availability-{{ availability_value|slugify }}">
            <input class="form-check-input availability-checkbox" type="checkbox"
                   id="availability_{{ availability_value|slugify }}" value="{{ availability_value }}"
                   {% if availability_value in selected_availability %}checked{% endif %}>
            <label class="form-check-label" for="availability_{{ availability_value|slugify }}">
              {% if availability_value == "available" %}
                <i class="fas fa-check-circle me-2"></i>{{ availability_name }}
              {% elif availability_value == "out_of_stock" %}
                <i class="fas fa-times-circle me-2"></i>{{ availability_name }}
              {% elif availability_value == "not_active" %}
                <i class="fas fa-ban me-2"></i>{{ availability_name }}
              {% endif %}
            </label>
          </div>
        {% endfor %}
      </div>
    </div>
    <!-- Price section -->
    <div class="filter-section mt-3">
      <button class="filter-section-toggle w-100 d-flex align-items-center justify-content-between"
              id="priceToggleBtn" type="button" aria-expanded="false" aria-controls="priceSection">
        <span class="fw-bold">Price Range</span>
        <i class="fas fa-chevron-down small ms-2 toggle-icon"></i>
      </button>

      <div class="filter-section-body mt-2" id="priceSection">
        <div class="price-filter-container">

          <!-- Range Slider -->
          <div class="price-slider-container mb-3">
            <div class="price-slider-wrapper">
              <input type="range" class="form-range price-range-min"
                     id="priceRangeMin"
                     min="{{ price_range.min }}"
                     max="{{ price_range.max }}"
                     value="{{ price_range.current_min }}"
                     step="0.01">
              <input type="range" class="form-range price-range-max"
                     id="priceRangeMax"
                     min="{{ price_range.min }}"
                     max="{{ price_range.max }}"
                     value="{{ price_range.current_max }}"
                     step="0.01">
              <div class="price-slider-track">
                <div class="price-slider-range"></div>
              </div>
            </div>
          </div>

          <!-- Input Fields -->
          <div class="row g-2">
            <div class="col-6">
              <label for="minPriceInput" class="form-label small text-muted">Min Price</label>
              <div class="input-group input-group-sm">
                <span class="input-group-text">$</span>
                <input type="number"
                       class="form-control"
                       id="minPriceInput"
                       min="{{ price_range.min }}"
                       max="{{ price_range.max }}"
                       value="{{ price_range.current_min }}"
                       step="0.01">
              </div>
            </div>
            <div class="col-6">
              <label for="maxPriceInput" class="form-label small text-muted">Max Price</label>
              <div class="input-group input-group-sm">
                <span class="input-group-text">$</span>
                <input type="number"
                       class="form-control"
                       id="maxPriceInput"
                       min="{{ price_range.min }}"
                       max="{{ price_range.max }}"
                       value="{{ price_range.current_max }}"
                       step="0.01">
              </div>
            </div>
          </div>

          <!-- Current Range Display -->
          <div class="price-display mt-2 text-center">
            <small class="text-muted">
              Current: <span class="fw-bold text-primary" id="currentPriceDisplay">
                ${{ price_range.current_min }} - ${{ price_range.current_max }}
              </span>
            </small>
          </div>

        </div>
      </div>
    </div>

    <!-- Discount section -->
    <div class="filter-section mt-3">
      <button class="filter-section-toggle w-100 d-flex align-items-center justify-content-between"
              id="discountToggleBtn" type="button" aria-expanded="false" aria-controls="discountSection">
        <span class="fw-bold">Discount</span>
        <i class="fas fa-chevron-down small ms-2 toggle-icon"></i>
      </button>

      <div class="filter-section-body mt-2" id="discountSection">
        <div class="form-check discount-all">
          <input class="form-check-input" type="checkbox" id="discount_all">
          <label class="form-check-label" for="discount_all">
            <i class="fas fa-tags me-2"></i>All
          </label>
        </div>
        {% for discount_value, discount_name in discount_options %}
          <div class="form-check discount-{{ discount_value|slugify }}">
            <input class="form-check-input discount-checkbox" type="checkbox"
                   id="discount_{{ discount_value|slugify }}" value="{{ discount_value }}"
                   {% if discount_value in selected_discount %}checked{% endif %}>
            <label class="form-check-label" for="discount_{{ discount_value|slugify }}">
              {% if discount_value == "on_sale" %}
                <i class="fas fa-percentage me-2"></i>{{ discount_name }}
              {% elif discount_value == "no_discount" %}
                <i class="fas fa-equals me-2"></i>{{ discount_name }}
              {% endif %}
            </label>
          </div>
        {% endfor %}
      </div>
    </div>

  </div>

  <div class="filter-footer d-flex justify-content-between">
    <button type="button" class="btn btn-outline-secondary btn-sm" id="resetFilters">
      <i class="fas fa-undo me-1"></i>Reset
    </button>
    <button type="button" class="btn btn-primary btn-sm" id="applyFilters">
      <i class="fas fa-search me-1"></i>Apply
    </button>
  </div>
</div>
